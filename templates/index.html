<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Photobooth</title>

  <!-- Google Fonts -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&family=Rubik:ital,wght@0,300..900;1,300..900&family=Unbounded:wght@200..900&family=WDXL+Lubrifont+TC&display=swap');
  </style>

  <!-- CSS Styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="stylesheet" href="/static/assets/stylesheet/style.css">
  <link rel="stylesheet" href="/static/assets/stylesheet/button.css">
  <link rel="stylesheet" href="/static/assets/stylesheet/frame.css">
  <style>
    #videoContainer {
      position: relative;
      width: 640px;
      height: 480px;
    }
    #video, #hatOverlay {
      position: absolute;
      top: 0;
      left: 0;
    }
    #hatOverlay {
      z-index: 2;
      display: none;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">
      <img src="/static/assets/image/logo.png" alt="Logo">
    </div>
    <input type="checkbox" class="humburger-sqr" id="humburger" onclick="toggleMenu()">
    <label for="humburger" class="toggle">
      <div class="bars" id="bar1"></div>
      <div class="bars" id="bar2"></div>
      <div class="bars" id="bar3"></div>
    </label>
    <ul id="menu">
      <li><a href="#">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Report Bug</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </nav>

  <!-- Frame Selector Sidebar -->
  <div class="side-frame" id="side-frame">
    <div class="close-frameBox">
      <input type="checkbox" id="close-Frame" onclick="toggleFrameSelect()">
      <label for="close-Frame">
        <svg class="frameSelect-close" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
          <path d="M256-213.85 213.85-256l224-224-224-224L256-746.15l224 224 224-224L746.15-704l-224 224 224 224L704-213.85l-224-224-224 224Z"/>
        </svg>
      </label>
    </div>
    <select id="frameSelect">
      <option value="frame1.png">Frame 1</option>
      <option value="frame2.png">Frame 2</option>
      <option value="frame3.png">Frame 3</option>
      <option value="frame4.png">Frame 4</option>
    </select>
    <!-- âœ… Tambahkan Checkbox Gunakan Filter -->
    <div style="text-align: center; margin-top: 10px;">
        <label style="font-family: 'Rubik', sans-serif;">
          <input type="checkbox" id="useFilter" checked>
          Gunakan Filter Topi
        </label>
      </div>
    <img id="framePreview" src="/static/frames/frame1.png" alt="Preview Frame">
  </div>

  <!-- Kamera & Tombol -->
  <div class="selection-block">
    <div class="frame-content">
      <div class="frame" id="idf1">
        <div id="videoContainer">
            <video id="video" autoplay muted playsinline></video>
            <img id="hatOverlay" src="/static/filters/hat.png" alt="Hat Overlay">
          </div>
        <span></span>
        <span></span>
        <div class="fullscreen_svg">
          <input type="checkbox" id="toggleFullScreen" onclick="event.stopPropagation(); toggleFullScreen(this)">
          <label for="toggleFullScreen">
            <svg class="fullscreen_tap" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
              <path d="M120-120v-200h80v120h120v80H120Zm520 0v-80h120v-120h80v200H640ZM120-640v-200h200v80H200v120h-80Zm640 0v-120H640v-80h200v200h-80Z"/>
            </svg>
          </label>
        </div>
        <canvas id="canvas" style="display:none;"></canvas>
      </div>
    </div>

    <!-- Tombol Ambil Foto -->
    <div class="btn-relative">
      <div class="container" onclick="takePhoto()">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <div class="circle-tap"></div>
      </div>
    </div>
  </div>

  <!-- Tombol Toggle Frame Sidebar -->
  <button class="frame-toggle" onclick="toggleFrameSelect()">
    <span>Frame Select</span>
    <svg width="15px" height="10px" viewBox="0 0 13 10">
      <path d="M1,5 L11,5"></path>
      <polyline points="8 1 12 5 8 9"></polyline>
    </svg>
  </button>

  <!-- Footer -->
  <br>
  <p style="text-align:center; font-size:10px; font-family: Arial, Helvetica, sans-serif;">
    The photo you print will not be saved in our database
  </p>
  <p style="text-align:center; font-size:10px; font-family: Arial, Helvetica, sans-serif; color: #6d6d6d;">
    Create by DhidiDev
  </p>

  <!-- Script -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_detection/face_detection.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  <script src="/static/script.js"></script>

</body>
</html>